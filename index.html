<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Noori Styles - Product Categories</title>
  <style>
    :root {
      --primary-color: #f499c1;
      --primary-color-dark: #b35c85;
      --primary-color-light: #fff0f6;
      --primary-color-alt: #b3a2ce;
      --background-color: white;
      --text-color: #4b3a57;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--background-color);
      color: var(--text-color);
    }
    header {
      background: var(--primary-color);
      color: white;
      text-align: center;
      padding: 2rem 1rem;
      font-size: 2rem;
      font-weight: bold;
    }
    #themeChanger {
      max-width: 960px;
      margin: 1rem auto;
      padding: 0 1rem;
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    #themeChanger label {
      font-weight: bold;
      display: block;
      margin-bottom: 0.3rem;
    }
    #themeChanger div {
      min-width: 130px;
    }
    #themeChanger input[type="color"] {
      width: 100%;
      height: 40px;
      border-radius: 8px;
      border: 1px solid #ccc;
      cursor: pointer;
    }
    #applyThemeBtn {
      background: var(--primary-color-alt);
      color: white;
      border: none;
      padding: 0.7rem 1.5rem;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      align-self: center;
      height: 40px;
      margin-top: 1.6rem;
    }
    #applyThemeBtn:hover {
      background: var(--primary-color-dark);
    }
    main {
      max-width: 960px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    .section {
      margin-bottom: 3rem;
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      background: var(--primary-color-light);
      padding: 1rem;
      position: relative;
    }
    .section-title {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary-color-dark);
      margin-bottom: 1rem;
      cursor: text;
    }
    .delete-section-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #ff4d6d;
      border: none;
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .products {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.2rem;
    }
    @media (min-width: 768px) {
      .products {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    .product {
      background: var(--primary-color-alt);
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 0 10px rgba(179, 162, 206, 0.4);
      color: white;
      text-align: center;
      position: relative;
    }
    .product img {
      max-width: 100%;
      border-radius: 12px;
      margin-bottom: 0.5rem;
    }
    .price {
      color: white;
      font-weight: bold;
      margin-top: 0.3rem;
    }
    .delete-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #ff4d6d;
      border: none;
      color: white;
      padding: 4px 8px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    form {
      margin: 1rem 0;
    }
    form input, form textarea {
      width: 100%;
      padding: 0.4rem;
      margin-bottom: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
      color: var(--text-color);
      background: white;
    }
    form button {
      background: var(--primary-color);
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 20px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      width: 100%;
    }
    form button:hover {
      background: var(--primary-color-dark);
    }
    #addSectionBtn {
      display: block;
      margin: 2rem auto;
      background: var(--primary-color-alt);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      font-size: 1.1rem;
      border-radius: 10px;
      cursor: pointer;
    }
    #addSectionBtn:hover {
      background: var(--primary-color-dark);
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 3rem;
      padding-bottom: 1rem;
      color: #999;
    }
  </style>
</head>
<body>
  <header>The Noori Styles</header>

  <div id="themeChanger">
    <div>
      <label for="primaryColorInput">Primary Color</label>
      <input id="primaryColorInput" type="color" value="#f499c1" />
    </div>
    <div>
      <label for="backgroundColorInput">Background</label>
      <input id="backgroundColorInput" type="color" value="#ffffff" />
    </div>
    <div>
      <label for="textColorInput">Text Color</label>
      <input id="textColorInput" type="color" value="#4b3a57" />
    </div>
    <button id="applyThemeBtn">Apply Theme</button>
  </div>

  <main>
    <button id="addSectionBtn">+ Add New Section</button>
    <div id="sections"></div>
  </main>
  <footer>Â© 2025 The Noori Styles</footer>

  <script>
    let categories = JSON.parse(localStorage.getItem('categories') || '[]');
    const root = document.documentElement;

    function saveCategories() {
      localStorage.setItem('categories', JSON.stringify(categories));
    }

    function createSection(name = "New Section") {
      categories.push({ id: Date.now(), name, products: [] });
      saveCategories();
      renderSections();
    }

    function deleteSection(id) {
      if (confirm("Delete this section?")) {
        categories = categories.filter(c => c.id !== id);
        saveCategories();
        renderSections();
      }
    }

    function addProduct(categoryId, product) {
      const cat = categories.find(c => c.id === categoryId);
      if (cat) {
        cat.products.push(product);
        saveCategories();
        renderSections();
      }
    }

    function deleteProduct(categoryId, productId) {
      const cat = categories.find(c => c.id === categoryId);
      if (cat) {
        cat.products = cat.products.filter(p => p.id !== productId);
        saveCategories();
        renderSections();
      }
    }

    function renderSections() {
      const container = document.getElementById('sections');
      container.innerHTML = '';
      categories.forEach(category => {
        const section = document.createElement('div');
        section.className = 'section';

        const title = document.createElement('div');
        title.className = 'section-title';
        title.contentEditable = true;
        title.textContent = category.name;
        title.onblur = () => {
          category.name = title.textContent.trim() || "Untitled Section";
          saveCategories();
        };

        const delBtn = document.createElement('button');
        delBtn.className = 'delete-section-btn';
        delBtn.textContent = 'Delete Section';
        delBtn.onclick = () => deleteSection(category.id);

        section.appendChild(title);
        section.appendChild(delBtn);

        // Product form
        const form = document.createElement('form');
        form.innerHTML = `
          <input type="text" name="pname" placeholder="Product Name" required />
          <input type="number" name="pprice" placeholder="Price (PKR)" required min="0" />
          <input type="file" name="pimage" accept="image/*" required />
          <textarea name="pdesc" placeholder="Description (optional)" rows="2"></textarea>
          <button type="submit">Add Product</button>
        `;
        form.onsubmit = e => {
          e.preventDefault();
          const nameInput = form.querySelector('[name="pname"]');
          const priceInput = form.querySelector('[name="pprice"]');
          const fileInput = form.querySelector('[name="pimage"]');
          const descInput = form.querySelector('[name="pdesc"]');

          if (!fileInput.files[0]) return;

          const reader = new FileReader();
          reader.onload = () => {
            const product = {
              id: Date.now(),
              name: nameInput.value,
              price: priceInput.value,
              description: descInput.value || "",
              image: reader.result
            };
            addProduct(category.id, product);
            form.reset();
          };
          reader.readAsDataURL(fileInput.files[0]);
        };
        section.appendChild(form);

        // Products display
        const productsDiv = document.createElement('div');
        productsDiv.className = 'products';
        category.products.forEach(product => {
          const div = document.createElement('div');
          div.className = 'product';
          div.innerHTML = `
            <img src="${product.image}" alt="${product.name}" />
            <h3>${product.name}</h3>
            ${product.description ? `<p>${product.description}</p>` : ""}
            <div class="price">PKR ${product.price}</div>
          `;

          const del = document.createElement('button');
          del.textContent = "Delete";
          del.className = "delete-btn";
          del.onclick = () => deleteProduct(category.id, product.id);

          div.appendChild(del);
          productsDiv.appendChild(div);
        });

        section.appendChild(productsDiv);
        container.appendChild(section);
      });
    }

    // Theme controls
    function setColors(primary, background, text) {
      root.style.setProperty('--primary-color', primary);
      root.style.setProperty('--background-color', background);
      root.style.setProperty('--text-color', text);
      localStorage.setItem('primaryColor', primary);
      localStorage.setItem('backgroundColor', background);
      localStorage.setItem('textColor', text);
    }

    document.getElementById('applyThemeBtn').onclick = () => {
      const primary = document.getElementById('primaryColorInput').value;
      const background = document.getElementById('backgroundColorInput').value;
      const text = document.getElementById('textColorInput').value;
      setColors(primary, background, text);
    };

    document.getElementById('addSectionBtn').onclick = () => createSection();

    window.onload = () => {
      // Load theme
      const p = localStorage.getItem('primaryColor') || '#f499c1';
      const b = localStorage.getItem('backgroundColor') || '#ffffff';
      const t = localStorage.getItem('textColor') || '#4b3a57';
      setColors(p, b, t);
      renderSections();
    };
  </script>
</body>
</html>
